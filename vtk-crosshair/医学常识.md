# MPR 和 斜切重采样视图

## ✅ 什么是 MPR？

MPR 是指：从三维的扫描图像数据中，在任意平面上重新构建二维图像。

最常见的三种 MPR 平面是：

- transverse（轴向）：像 CT 一样从脚往头看，每张是横断面

- coronal（冠状）：从正面看头（像照身份证）

- sagittal（矢状）：从左耳看右耳方向

| 平面名称        | 别名       | 方向                 | 举例                           |
| --------------- | ---------- | -------------------- | ------------------------------ |
| Axial 横断面    | transverse | 腹部切片、脑部水平切 | 医生查看大脑从上往下的切面     |
| Coronal 冠状面  | frontal    | 正面切片             | 医生看人体从前面像解剖那样切开 |
| Sagittal 矢状面 | side       | 左右切片             | 医生查看脊柱从侧面一刀刀的结构 |

> 📦 想象一个三维盒子（三维 CT 数据），MPR 就是在这个盒子上横着、竖着、侧着“剖一刀”，看内部结构。

## ✅ 什么是 斜切重采样视图？

斜切（Oblique）是指：不是按标准的 X / Y / Z 方向切片，而是在任意角度对三维数据进行切片重建

举个例子：

> CT 显示一个骨折，但标准方向看不清裂缝方向。医生选择一条穿过骨折裂缝的斜向线条作为新的切面方向，沿这条线重建图像，就能清楚地看到骨裂。

假设你有一个 CT 头部数据（立方体形状）：

1. MPR 视图：

- 医生可以：

  - 查看水平切片（Axial）：每一张图像就像从头顶往下切的一层蛋糕。

  - 查看冠状切片（Coronal）：从脸正面往后切。

  - 查看矢状切片（Sagittal）：从左耳切到右耳。

- Oblique 视图（斜切）：

  - 医生关心某个斜着走的神经管道，或者斜向走的血管。

  - 在常规 MPR 中无法准确显示这些结构。

  - 所以医生选择一条非 90° 的切面，重新对三维数据采样，生成一个“沿着血管方向”的切面视图，就叫斜切视图。

## 🧩 技术关键

MPR 和斜切，本质上都是对 3D 体数据（Volume）的切面重采样。

- MPR：采样方向是固定轴（X/Y/Z）；

- Oblique：采样方向是任意旋转后的平面，需要矩阵变换计算。

- 常用算法：三线性插值（Trilinear Interpolation）用于斜向像素灰度计算

# 为何世界坐标系需要先转成图像坐标系, 而不是世界坐标系直接转成 canvas 坐标系

如果你只想“画在屏幕上看起来对”，可以直接 world → display

但如果你要保证与图像数据完全一致、精准交互（比如定位、标注、MPR 跟切片对齐），你必须经过图像坐标系

图像坐标（image coordinate）是体数据里的实际 voxel index，例如 [i, j, k]，表示图像数据体素的编号

| 应用场景                                             | 是否必须 world → image | 理由                         |
| ---------------------------------------------------- | ---------------------- | ---------------------------- |
| **画一条视觉参考线**                                 | ❌ 不必须              | world → display 足够         |
| **画的是图像切面交线，且必须穿过 volume 精确体素点** | ✅ 必须                | 否则可能线偏离实际数据       |
| **需要标注、测量、交互（比如十字线）**               | ✅ 必须                | 用 voxel index 精确才能交互  |
| **你要从 MPR 平面提取出数据（值、像素）**            | ✅ 必须                | 世界坐标不一定落在图像像素上 |
